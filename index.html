<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Clicker</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* ... (–ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ... */
        
        .profile-container {
            text-align: center;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin: 0 auto 15px;
            background-color: var(--color-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: var(--color-accent);
            overflow: hidden;
        }
        
        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .profile-info {
            margin-bottom: 20px;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: rgba(106, 90, 205, 0.3);
            padding: 10px;
            border: 1px solid var(--color-primary);
        }
        
        .developer-panel {
            display: none;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            margin-top: 20px;
            border: 2px solid var(--color-critical);
        }
        
        .dev-input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid var(--color-accent);
            color: white;
        }
        
        .dev-btn {
            background: var(--color-critical);
            color: white;
            border: none;
            padding: 8px;
            margin: 5px;
            cursor: pointer;
            width: 100%;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(106, 90, 205, 0.9);
            padding: 10px 20px;
            border: 2px solid var(--color-accent);
            z-index: 100;
            animation: fadeOut 3s forwards;
        }
        
        @keyframes fadeOut {
            0% { opacity: 1; top: 20px; }
            70% { opacity: 1; top: 20px; }
            100% { opacity: 0; top: -100px; }
        }
        
        .minigame-selector {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
        }
        
        .minigame-btn {
            padding: 8px;
            background: var(--color-primary);
            border: none;
            color: white;
            cursor: pointer;
        }
        
        .minigame-btn.active {
            background: var(--color-accent);
            color: black;
        }
        
        .minigame-container {
            display: none;
        }
        
        .minigame-container.active {
            display: block;
        }
        
        #minigame2-area {
            text-align: center;
        }
        
        #minigame2-button {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--color-critical);
            border: none;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin: 20px auto;
            box-shadow: 0 0 15px rgba(255, 85, 85, 0.7);
        }
    </style>
</head>
<body>
    <div class="pixel-border">
        <h1>PIXEL CLICKER</h1>
        
        <!-- ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ... -->
        
        <div class="tabs">
            <!-- ... (–¥—Ä—É–≥–∏–µ –≤–∫–ª–∞–¥–∫–∏) ... -->
            <div class="tab" data-tab="profile">–ü–†–û–§–ò–õ–¨</div>
        </div>
        
        <!-- ... (–¥—Ä—É–≥–∏–µ –≤–∫–ª–∞–¥–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞) ... -->
        
        <div id="minigame" class="tab-content">
            <div class="minigame-container">
                <div class="minigame-selector">
                    <button class="minigame-btn active" data-minigame="1">–£–î–ê–† –ü–û –ú–ò–®–ï–ù–ò</button>
                    <button class="minigame-btn" data-minigame="2">–ë–´–°–¢–†–´–ï –ö–õ–ò–ö–ò</button>
                </div>
                
                <div id="minigame1" class="minigame-container active">
                    <h3>–£–î–ê–†–¨ –ü–û –ú–ò–®–ï–ù–ò!</h3>
                    <p>–ó–∞ –∫–∞–∂–¥—É—é –º–∏—à–µ–Ω—å: <strong>+<span id="minigame-reward">1</span> –∫—Ä–∏—Å—Ç–∞–ª–ª</strong></p>
                    <p>–í—Ä–µ–º–µ–Ω–∏ –æ—Å—Ç–∞–ª–æ—Å—å: <span id="minigame-timer">30</span> —Å–µ–∫</p>
                    <p>–°–±–∏—Ç–æ –º–∏—à–µ–Ω–µ–π: <span id="minigame-score">0</span></p>
                    <button id="minigame-start">–ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
                    <div id="minigame-area" style="position:relative; height:200px; margin-top:20px; display:none;"></div>
                </div>
                
                <div id="minigame2" class="minigame-container">
                    <h3>–ë–´–°–¢–†–´–ï –ö–õ–ò–ö–ò!</h3>
                    <p>–ö–ª–∏–∫–Ω–∏—Ç–µ –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ —Ä–∞–∑ –∑–∞ 10 —Å–µ–∫—É–Ω–¥</p>
                    <p>–í—Ä–µ–º–µ–Ω–∏ –æ—Å—Ç–∞–ª–æ—Å—å: <span id="minigame2-timer">10</span> —Å–µ–∫</p>
                    <p>–ö–ª–∏–∫–æ–≤: <span id="minigame2-score">0</span></p>
                    <div id="minigame2-area">
                        <button id="minigame2-button">–ö–õ–ò–ö–ê–ô!</button>
                    </div>
                    <button id="minigame2-start">–ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
                </div>
            </div>
        </div>
        
        <div id="profile" class="tab-content">
            <div class="pixel-border">
                <div class="profile-container">
                    <div class="profile-avatar" id="user-avatar">
                        üë§
                    </div>
                    <h2 id="username">–ò–≥—Ä–æ–∫</h2>
                    
                    <div class="profile-info">
                        <p>–£—Ä–æ–≤–µ–Ω—å: <span id="user-level">1</span></p>
                        <p>–û–ø—ã—Ç: <span id="user-xp">0</span>/<span id="next-level-xp">100</span></p>
                    </div>
                    
                    <div class="progress-bar">
                        <div id="level-bar" class="progress-bar-fill" style="width: 0%"></div>
                    </div>
                    
                    <div class="profile-stats">
                        <div class="stat-card">
                            <strong>–ó–∞—Ä–∞–±–æ—Ç–æ–∫/—Å–µ–∫</strong>
                            <p id="cps-stat">0.00</p>
                        </div>
                        <div class="stat-card">
                            <strong>–í—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤</strong>
                            <p id="total-clicks">0</p>
                        </div>
                        <div class="stat-card">
                            <strong>–í—Å–µ–≥–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤</strong>
                            <p id="total-crystals">0</p>
                        </div>
                        <div class="stat-card">
                            <strong>–ü—Ä–µ—Å—Ç–∏–∂</strong>
                            <p id="prestige-stat">0</p>
                        </div>
                    </div>
                    
                    <button id="report-bug" class="dev-btn">–ù–ê–®–Å–õ –û–®–ò–ë–ö–£</button>
                    <button id="dev-mode-btn" class="minigame-btn" style="margin-top: 20px;">–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö</button>
                    
                    <div id="developer-panel" class="developer-panel">
                        <h3>–ü–ê–ù–ï–õ–¨ –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–ê</h3>
                        <input type="password" id="dev-password" class="dev-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–æ—Å—Ç—É–ø–∞">
                        <button id="dev-access-btn" class="dev-btn">–ü–û–î–¢–í–ï–†–î–ò–¢–¨</button>
                        
                        <div id="dev-tools" style="display: none;">
                            <input type="number" id="dev-clicks" class="dev-input" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤">
                            <button id="dev-add-clicks" class="dev-btn">–î–û–ë–ê–í–ò–¢–¨ –ö–õ–ò–ö–ò</button>
                            
                            <input type="number" id="dev-crystals" class="dev-input" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤">
                            <button id="dev-add-crystals" class="dev-btn">–î–û–ë–ê–í–ò–¢–¨ –ö–†–ò–°–¢–ê–õ–õ–´</button>
                            
                            <button id="dev-reset" class="dev-btn" style="background: #ff5555;">–°–ë–†–û–°–ò–¢–¨ –ü–†–û–ì–†–ï–°–°</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.MainButton.hide();
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        let gameState = {
            clicks: 0,
            crystals: 0,
            prestige: 0,
            generatorCPS: 0, // –¢–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã
            manualCPS: 0,    // –¢–æ–ª—å–∫–æ —Ä—É—á–Ω—ã–µ –∫–ª–∏–∫–∏
            totalClicks: 0,
            totalCrystals: 0,
            level: 1,
            xp: 0,
            nextLevelXp: 100,
            generators: [
                // ... (–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ...
            ],
            upgrades: [
                // ... (—É–ª—É—á—à–µ–Ω–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) ...
            ],
            achievements: [
                // ... (–¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è) ...
                { id: 13, name: "–ö–æ—Ä–æ–ª—å –∫–ª–∏–∫–æ–≤", description: "–°–¥–µ–ª–∞–π—Ç–µ 100,000 –∫–ª–∏–∫–æ–≤", icon: "üëë", unlocked: false, reward: 500, condition: state => state.totalClicks >= 100000 },
                { id: 14, name: "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω—ã–π –º–∞–≥–Ω–∞—Ç", description: "–ò–º–µ—Ç—å 100 —É—Ä–æ–≤–Ω–µ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤", icon: "üèóÔ∏è", unlocked: false, reward: 800, condition: state => state.generators.reduce((sum, g) => sum + g.level, 0) >= 100 },
                { id: 15, name: "–ú–∞—Å—Ç–µ—Ä –º–∏–Ω–∏-–∏–≥—Ä", description: "–ó–∞—Ä–∞–±–æ—Ç–∞—Ç—å 100 –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤ –≤ –º–∏–Ω–∏-–∏–≥—Ä–∞—Ö", icon: "üéØ", unlocked: false, reward: 1000, condition: state => state.minigameTotalCrystals >= 100 },
                { id: 16, name: "–õ–µ–≥–µ–Ω–¥–∞ –ø—Ä–µ—Å—Ç–∏–∂–∞", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç—å 5-–≥–æ –ø—Ä–µ—Å—Ç–∏–∂–∞", icon: "üèÜ", unlocked: false, reward: 1500, condition: state => state.prestige >= 5 },
                { id: 17, name: "–ë—ã—Å—Ç—Ä—ã–µ –ø–∞–ª—å—Ü—ã", description: "–°–¥–µ–ª–∞—Ç—å 20 –∫–ª–∏–∫–æ–≤/—Å–µ–∫", icon: "‚ö°", unlocked: false, reward: 700, condition: state => state.manualCPS >= 20 },
                { id: 18, name: "–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–ª–∏–∫–µ—Ä–∞", description: "–ò–º–µ—Ç—å 1 –º–∏–ª–ª–∏–∞—Ä–¥ –∫–ª–∏–∫–æ–≤", icon: "üåå", unlocked: false, reward: 5000, condition: state => state.totalClicks >= 1000000000 }
            ],
            crystalUpgrades: {
                // ... (—É–ª—É—á—à–µ–Ω–∏—è –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤) ...
            },
            // ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã) ...
        };
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ CPS
        let clickTimestamps = [];
        let minigameInterval;
        let minigame2Interval;
        let lastAchievementNotification = 0;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            setupUserProfile();
            renderGame();
            setupEventListeners();
            checkAchievements();
            updateDailyReward();
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫–ª–∏–∫–æ–≤ –¢–û–õ–¨–ö–û –û–¢ –ì–ï–ù–ï–†–ê–¢–û–†–û–í
            setInterval(() => {
                gameState.clicks += gameState.generatorCPS / 10;
                gameState.totalClicks += gameState.generatorCPS / 10;
                updateXp(gameState.generatorCPS / 10);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º CPS –∫–∞–∂–¥—ã–µ 0.5 —Å–µ–∫
                updateCPS();
                updateDisplays();
                updateButtonStates();
                saveGame();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞—Ä–∞
                updateCriticalBar();
            }, 100);
        }
        
        // –†–∞—Å—á–µ—Ç CPS
        function updateCPS() {
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º CPS –æ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤
            gameState.generatorCPS = calculateGeneratorCPS();
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º CPS –æ—Ç —Ä—É—á–Ω—ã—Ö –∫–ª–∏–∫–æ–≤ (–∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–µ–∫—É–Ω–¥)
            const now = Date.now();
            clickTimestamps = clickTimestamps.filter(timestamp => now - timestamp < 5000);
            gameState.manualCPS = clickTimestamps.length / 5;
        }
        
        // –†–∞—Å—á–µ—Ç CPS —Ç–æ–ª—å–∫–æ –æ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤
        function calculateGeneratorCPS() {
            let totalCPS = 0;
            
            // CPS –æ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤
            gameState.generators.forEach(generator => {
                totalCPS += generator.level * generator.baseCPS * (1 + gameState.upgrades[1].level * gameState.upgrades[1].effect);
            });
            
            // –ë–æ–Ω—É—Å –æ—Ç –∫—Ä–∏—Å—Ç–∞–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π
            totalCPS *= 1 + (gameState.crystalUpgrades.generatorBoost * 0.1);
            
            return totalCPS;
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function setupUserProfile() {
            try {
                const user = tg.initDataUnsafe.user;
                if (user) {
                    // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    const username = user.username ? `@${user.username}` : 
                                   `${user.first_name || ''} ${user.last_name || ''}`.trim();
                    document.getElementById('username').textContent = username || '–ò–≥—Ä–æ–∫';
                    
                    // –ê–≤–∞—Ç–∞—Ä
                    const avatar = document.getElementById('user-avatar');
                    if (user.photo_url) {
                        avatar.innerHTML = `<img src="${user.photo_url}" alt="Avatar">`;
                    } else {
                        avatar.textContent = user.first_name ? user.first_name[0] : 'üë§';
                    }
                }
            } catch (e) {
                console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è");
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –∏ –æ–ø—ã—Ç–∞
        function updateXp(gained) {
            gameState.xp += gained;
            if (gameState.xp >= gameState.nextLevelXp) {
                gameState.level++;
                gameState.xp = gameState.xp - gameState.nextLevelXp;
                gameState.nextLevelXp = Math.floor(gameState.nextLevelXp * 1.5);
                
                // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —É—Ä–æ–≤–µ–Ω—å
                const levelReward = gameState.level * 100;
                gameState.crystals += levelReward;
                showNotification(`üéâ –£—Ä–æ–≤–µ–Ω—å ${gameState.level}! +${levelReward} –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤`);
            }
            
            const levelBar = document.getElementById('level-bar');
            const percent = (gameState.xp / gameState.nextLevelXp) * 100;
            levelBar.style.width = `${percent}%`;
            
            document.getElementById('user-level').textContent = gameState.level;
            document.getElementById('user-xp').textContent = formatNumber(gameState.xp);
            document.getElementById('next-level-xp').textContent = formatNumber(gameState.nextLevelXp);
        }
        
        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showNotification(message) {
            const now = Date.now();
            if (now - lastAchievementNotification < 2000) return;
            
            lastAchievementNotification = now;
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏) ...
        
        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
        function buyUpgrade(id) {
            const upgrade = gameState.upgrades.find(u => u.id === id);
            const cost = getUpgradeCost(upgrade);
            
            if (gameState.clicks >= cost && upgrade.level < upgrade.maxLevel) {
                gameState.clicks -= cost;
                upgrade.level++;
                
                // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞
                switch (upgrade.type) {
                    case "click":
                        gameState.baseClickPower += upgrade.effect;
                        break;
                    // ... (–¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã) ...
                }
                
                renderGame();
                checkAchievements();
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        function checkAchievements() {
            let unlockedSomething = false;
            
            gameState.achievements.forEach(achievement => {
                if (!achievement.unlocked && achievement.condition(gameState)) {
                    achievement.unlocked = true;
                    gameState.crystals += achievement.reward;
                    gameState.totalCrystals += achievement.reward;
                    unlockedSomething = true;
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    showNotification(`üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: ${achievement.name}! +${achievement.reward} –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤`);
                }
            });
            
            if (unlockedSomething) {
                renderAchievements();
                updateDisplays();
            }
        }
        
        // –ö–ª–∏–∫ –ø–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–Ω–æ–ø–∫–µ
        function handleMainClick(e) {
            let clickValue = gameState.baseClickPower * (1 + gameState.crystalUpgrades.clickMultiplier);
            
            // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤—Ä–µ–º—è –∫–ª–∏–∫–∞
            const now = Date.now();
            clickTimestamps.push(now);
            gameState.totalClicks++;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∏–∫
            let isCritical = false;
            if (Math.random() * 100 < gameState.criticalChance) {
                clickValue *= gameState.criticalMultiplier;
                isCritical = true;
            }
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–≤–∞–Ω—Ç–æ–≤—ã–π –∫–ª–∏–∫
            if (Math.random() * 100 < gameState.quantumChance) {
                clickValue *= 100;
                isCritical = true;
            }
            
            gameState.clicks += clickValue;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –∫–ª–∏–∫–∞
            showClickEffect(clickValue, isCritical);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º XP
            updateXp(clickValue / 10);
            
            updateDisplays();
        }
        
        // –ú–∏–Ω–∏-–∏–≥—Ä–∞ 2: –ë—ã—Å—Ç—Ä—ã–µ –∫–ª–∏–∫–∏
        function startMinigame2() {
            gameState.minigame2Active = true;
            gameState.minigame2Score = 0;
            gameState.minigame2Time = 10;
            
            document.getElementById('minigame2-start').disabled = true;
            document.getElementById('minigame2-button').style.display = 'block';
            document.getElementById('minigame2-score').textContent = '0';
            document.getElementById('minigame2-timer').textContent = '10';
            
            // –¢–∞–π–º–µ—Ä –∏–≥—Ä—ã
            minigame2Interval = setInterval(() => {
                gameState.minigame2Time--;
                document.getElementById('minigame2-timer').textContent = gameState.minigame2Time;
                
                if (gameState.minigame2Time <= 0) {
                    endMinigame2();
                }
            }, 1000);
        }
        
        function handleMinigame2Click() {
            if (!gameState.minigame2Active) return;
            
            gameState.minigame2Score++;
            document.getElementById('minigame2-score').textContent = gameState.minigame2Score;
        }
        
        function endMinigame2() {
            gameState.minigame2Active = false;
            clearInterval(minigame2Interval);
            
            // –ù–∞–≥—Ä–∞–¥–∞: 1 –∫—Ä–∏—Å—Ç–∞–ª–ª –∑–∞ –∫–∞–∂–¥—ã–µ 5 –∫–ª–∏–∫–æ–≤
            const reward = Math.floor(gameState.minigame2Score / 5);
            if (reward > 0) {
                gameState.crystals += reward;
                gameState.totalCrystals += reward;
                showNotification(`üéÆ –í—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ ${reward} –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤ –≤ –º–∏–Ω–∏-–∏–≥—Ä–µ!`);
            }
            
            document.getElementById('minigame2-start').disabled = false;
            document.getElementById('minigame2-button').style.display = 'none';
            
            updateDisplays();
            saveGame();
        }
        
        // ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏) ...
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // ... (–¥—Ä—É–≥–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏) ...
            
            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–∏–Ω–∏-–∏–≥—Ä
            document.querySelectorAll('.minigame-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const minigameId = this.dataset.minigame;
                    
                    // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                    document.querySelectorAll('.minigame-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–π –∫–Ω–æ–ø–∫–µ
                    this.classList.add('active');
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –º–∏–Ω–∏-–∏–≥—Ä—É
                    document.querySelectorAll('.minigame-container').forEach(container => {
                        container.classList.remove('active');
                    });
                    document.getElementById(`minigame${minigameId}`).classList.add('active');
                });
            });
            
            // –ú–∏–Ω–∏-–∏–≥—Ä–∞ 2
            document.getElementById('minigame2-start').addEventListener('click', startMinigame2);
            document.getElementById('minigame2-button').addEventListener('click', handleMinigame2Click);
            
            // –ö–Ω–æ–ø–∫–∞ "–ù–∞—à—ë–ª –æ—à–∏–±–∫—É"
            document.getElementById('report-bug').addEventListener('click', function() {
                tg.openTelegramLink('https://t.me/Pluh5');
            });
            
            // –ü–∞–Ω–µ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
            document.getElementById('dev-mode-btn').addEventListener('click', function() {
                document.getElementById('developer-panel').style.display = 'block';
            });
            
            document.getElementById('dev-access-btn').addEventListener('click', function() {
                const password = document.getElementById('dev-password').value;
                // –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ (PixelDev123)
                if (password === 'PixelDev123') {
                    document.getElementById('dev-tools').style.display = 'block';
                    showNotification('–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!');
                } else {
                    showNotification('–í—ã –Ω–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∏–≥—Ä–æ–π –¥–∞–ª—å—à–µ!');
                }
            });
            
            // –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
            document.getElementById('dev-add-clicks').addEventListener('click', function() {
                const amount = parseInt(document.getElementById('dev-clicks').value) || 0;
                gameState.clicks += amount;
                gameState.totalClicks += amount;
                updateDisplays();
                saveGame();
                showNotification(`–î–æ–±–∞–≤–ª–µ–Ω–æ ${formatNumber(amount)} –∫–ª–∏–∫–æ–≤`);
            });
            
            document.getElementById('dev-add-crystals').addEventListener('click', function() {
                const amount = parseInt(document.getElementById('dev-crystals').value) || 0;
                gameState.crystals += amount;
                gameState.totalCrystals += amount;
                updateDisplays();
                saveGame();
                showNotification(`–î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤`);
            });
            
            document.getElementById('dev-reset').addEventListener('click', function() {
                if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å?')) {
                    localStorage.removeItem('pixelClickerSave');
                    location.reload();
                }
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
        function updateProfile() {
            document.getElementById('cps-stat').textContent = gameState.generatorCPS.toFixed(2);
            document.getElementById('total-clicks').textContent = formatNumber(gameState.totalClicks);
            document.getElementById('total-crystals').textContent = gameState.totalCrystals;
            document.getElementById('prestige-stat').textContent = gameState.prestige;
        }
        
        // ... (–¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏) ...
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function renderGame() {
            updateDisplays();
            updateProfile(); // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å
            // ... (–æ—Å—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ) ...
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        initGame();
    </script>
</body>
</html>
